<xml xmlns="http://www.w3.org/1999/xhtml"><block type="setup" id="FZ;QNouPm+Ydel/bulm8" x="0" y="0"><statement name="DO"><block type="asr_speak" id="MaT`9+Oikgn}zKtgg?A["><field name="VOICE_SET">小蝶-清新女声</field><field name="vol">10</field><field name="speed">10</field><next><block type="asr_welcom" id=")3`e*f)~4i4wI?[QymJY"><field name="NAME">欢迎使用语音助手，用天问五幺唤醒我。</field><next><block type="asr_sleep" id="T/2u}Q$vc/$/dkOG~rov"><field name="NAME">我退下了，用天问五幺唤醒我</field><next><block type="asr_id" id="z;IHE4P.32Y=Pe:PfICo"><field name="ASR">天问五幺</field><field name="leibie">唤醒词</field><field name="huifu">我在</field><field name="id">0</field><next><block type="gpio_funmode" id="ENC/C3P0P4H4/KoMyBXq"><field name="fun">FORTH_FUNCTION</field><value name="PIN"><shadow type="pins_all" id="eU2MF(hJw7)Ff;`H1v$1"><field name="PIN">5</field></shadow></value><next><block type="gpio_funmode" id="A+n2k!f]XZ0(i:h9goj2"><field name="fun">FORTH_FUNCTION</field><value name="PIN"><shadow type="pins_all" id="px~bc4-uR!Qen5i`qC^u"><field name="PIN">6</field></shadow></value><next><block type="serial_begin" id="o%2!$I[12|nUZ.Q[;~_["><field name="serial_select">Serial</field><field name="TX">PB_5</field><field name="RX">PB_6</field><value name="CONTENT"><shadow type="baud" id="$E#51LbBfyDav,TDxl/X"><field name="baud">9600</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="hardware_init" id="a#vP1hg9+LDePKcD!,pJ" x="0" y="281"><statement name="DO"><block type="vol_set" id="gU{7Dv:f38~=#uU!~B8d"><value name="num"><shadow type="asr_vol" id="QbQL:0OVJ$J.pZ$dA1Pp"><field name="PIN">7</field></shadow></value><next><block type="haodabit_DELAY1" id="}d+/[-*c:R06qVWG3]r9"><comment pinned="false" h="80" w="280">注意需要等待ESP32上电，并且要等欢迎词播报结束，ESP32的初始化需要一定时间</comment><value name="ioinput"><shadow type="math_number" id="KGr6V9Vi:QRN[zg6AQ1t"><field name="NUM">5000</field></shadow></value><next><block type="espwifi_begin" id="-#bP^RMJSF.w%YBB#NK8"><field name="port">Serial2</field><next><block type="controls_if" id="L!~3@eQBU.jaz.r?xtl%"><mutation else="1"></mutation><value name="IF0"><block type="espwifi_check" id="/QLbvfFnakfk%ka~xV:;"><field name="port">Serial2</field></block></value><statement name="DO0"><block type="serial_println" id=",.FR~r[EB3+%S#nRhR?."><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="xj=m/D+(n(RgKmt+tkD-"><field name="TEXT">check ok</field></block></value></block></statement><statement name="ELSE"><block type="serial_println" id="`+3|Y?[@M=6Nic6YW9RP"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="k=?:Mr9=4^+jAILpB6S`"><field name="TEXT">check err</field></block></value></block></statement><next><block type="controls_if" id="ZGMP05KJe2/f-A?E_::o"><mutation else="1"></mutation><value name="IF0"><block type="espwifi_restore" id="0it,?CeU{~9kQJS15igM"><field name="port">Serial2</field></block></value><statement name="DO0"><block type="serial_println" id="/a8xYDh2csj6R-;@N%}!"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="RHgcKuN.%^/:bJ/5Mw*M"><field name="TEXT">restore ok</field></block></value></block></statement><statement name="ELSE"><block type="serial_println" id="2b,^}O9X$}B9WF]gJ.4b"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="ofon$JO_}?NTh:#a}OnR"><field name="TEXT">restore err</field></block></value></block></statement><next><block type="controls_if" id="2mmvXHHdh7A_{xIl832B"><mutation else="1"></mutation><value name="IF0"><block type="espwifi_setmode" id="2xQ*Vk{Co}L65tV^of*I"><field name="port">Serial2</field><field name="mode">WIFI_MODE_STATION</field></block></value><statement name="DO0"><block type="serial_println" id="0s?[9-;3yuSkKrvLsWCU"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="AS==3Jde@ZT{n{[V1OG)"><field name="TEXT">setMode ok</field></block></value></block></statement><statement name="ELSE"><block type="serial_println" id="KU+3Z!f*g-ePJM+OfX^C"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id=".[#`G1Shb^9r~|!qRGu("><field name="TEXT">setMode err</field></block></value></block></statement><next><block type="controls_if" id="LL?m`r+Ry=K{HKQ:|$%e"><mutation else="1"></mutation><value name="IF0"><block type="espwifi_connectap" id="^HU74W_(2K$Z]OU7F]mA"><field name="port">Serial2</field><value name="ssid"><shadow type="text" id="X9k49.6skyp/31HoFShl"><field name="TEXT">haoda7</field></shadow></value><value name="passwd"><shadow type="text" id="l0;lQDYM/ddqEmnZZ%xU"><field name="TEXT">0123456789</field></shadow></value></block></value><statement name="DO0"><block type="serial_println" id="B,NEn+V`7sqtW+*^Q;,t"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="Un4wuf^J+~H)B)iq@uN0"><field name="TEXT">connectAP ok</field></block></value></block></statement><statement name="ELSE"><block type="serial_println" id="H.XJyB{fS/8RIcf^xjqr"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="tmPTa+WuyAuhghOE0`9t"><field name="TEXT">connectAP err</field></block></value></block></statement><next><block type="controls_if" id="Bw}s`z|@Rtq]0pdZk;Gi"><mutation else="1"></mutation><value name="IF0"><block type="espwifi_connectserver" id="Qq1[I(Y!^KY%Tizmwt7u"><field name="port">Serial2</field><field name="enumE">enumTCP</field><value name="ip"><shadow type="text" id="zK:G2-20]opTd]O`_05w"><field name="TEXT">192.168.2.193</field></shadow></value><value name="ComNum"><shadow type="text" id="pHli^^!iPFoDq=Tb6WMw"><field name="TEXT">8080</field></shadow></value></block></value><statement name="DO0"><block type="serial_println" id="9Bbz|SN}l{jkGm1)*pG{"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="I8LC(v|D[8L,bis2{Bc2"><field name="TEXT">connectServer ok</field></block></value></block></statement><statement name="ELSE"><block type="serial_println" id="iMjaC0!oV8}MYpsIE-`8"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="m,r;qqXNpGFFHQZsdlwU"><field name="TEXT">connectServer  err</field></block></value></block></statement><next><block type="haodabit_DELAY1" id="F_F!l,x|Z|-s_#p#L);K"><value name="ioinput"><shadow type="math_number" id="C2OT|oS3ClM64f7F6/U5"><field name="NUM">1000</field></shadow></value><next><block type="espwifi_sendmessage" id="fP-_qYgr]x?Q?2WHOSCW"><field name="port">Serial2</field><value name="pStr"><block type="text" id="1{B%Di^jQZ]$#SkNhn-^"><field name="TEXT">hello</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="thread_app" id="yARIIzey|ib9,Xk^u@R2" x="0" y="1058"><field name="app_name">app</field><field name="uxPriority">4</field><field name="mem">128</field><statement name="DO"><block type="controls_repeat_forever" id="`)pP?{$|BM%I=Rqwu|X."><statement name="DO"><block type="controls_if" id="^-@Z-,/LR6TW{IGN;Ee!"><comment pinned="true" h="80" w="251">判断接收到服务器数据并且已经处理好消息，就返回当前状态</comment><value name="IF0"><block type="logic_compare" id="QE3]I^ch+Bq)YZe%{P`+"><field name="OP">EQ</field><value name="A"><block type="espwifi_getstate" id="8-Hlpe/wg/{Go-#,5en%"><field name="stus">TCPIP_NEW_MESSAGE</field></block></value><value name="B"><block type="espwifi_checkmessage" id="HHHo^@LyI%DI)`8D^+xF"><field name="port">Serial2</field></block></value></block></value><statement name="DO0"><block type="serial_println" id="a=(=x7n|!%+CC67KFSkF"><field name="serial_select">Serial</field><value name="CONTENT"><block type="espwifi_getmessage" id="$^~VyW0wIft/8_p%J#?Z"><field name="port">Serial2</field></block></value></block></statement><next><block type="haodabit_DELAY1" id=",h}8WzI4HAM--L}.ia]w"><value name="ioinput"><shadow type="math_number" id="?)wt-S#Y)Ym2j!$EC-z/"><field name="NUM">1</field></shadow></value></block></next></block></statement></block></statement></block></xml>
<!-- edittype="asr_pro" -->
<!-- officialLib="[{"id":409,"version":"0.0.1"}]" -->
<!-- personalLib="[]" -->