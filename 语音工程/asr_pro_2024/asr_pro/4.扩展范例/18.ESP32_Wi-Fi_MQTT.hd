<xml xmlns="http://www.w3.org/1999/xhtml"><block type="setup" id="FZ;QNouPm+Ydel/bulm8" x="0" y="0"><statement name="DO"><block type="gpio_funmode_setup" id="v[R}bj!S[fn5^Ej(snTk"><field name="PIN">17</field><field name="fun">SECOND_FUNCTION/ADC</field><next><block type="gpio_funmode_setup" id="J+,@O?1rf$vRLNxuC,/["><field name="PIN">28</field><field name="fun">FIRST_FUNCTION/output</field><next><block type="gpio_funmode" id="sc@3c.?,.N_4^Cw7w^?H"><field name="fun">FORTH_FUNCTION</field><value name="PIN"><shadow type="pins_all" id="P[%J;eTU3!MO0vj506J;"><field name="PIN">5</field></shadow></value><next><block type="gpio_funmode" id="?dJoqTNBP!#t8B1OksH}"><field name="fun">FORTH_FUNCTION</field><value name="PIN"><shadow type="pins_all" id="p1|Vb0aj76Afhs5umt9Q"><field name="PIN">6</field></shadow></value><next><block type="variables_declare" id="E4qWrS[p(rCd]kIAa2Xg"><field name="VAR">count</field><field name="ioinput">uint32_t</field><value name="VALUE"><block type="math_number" id="Th.CfzdZQ@FY!!jSaEL~"><field name="NUM">0</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type="hardware_init" id="zjmqt/[_j@1+1O$_!2r5" x="0" y="218"><statement name="DO"><block type="serial_begin" id="-L/yaO5ooB5Ji-|?K,i="><field name="serial_select">Serial</field><field name="TX">PB_5</field><field name="RX">PB_6</field><value name="CONTENT"><shadow type="baud" id="DUm*O=xV?8bNX?E+uX+B"><field name="baud">9600</field></shadow></value><next><block type="asr_ws2812_pixel_init" id="s~3M_?.s%z?`tHl7sui8"><value name="num_leds"><shadow type="math_number" id="cP!Y=H$#M/K?l$h{qV=f"><field name="NUM">3</field></shadow></value><value name="port"><shadow type="pins_digital" id="Mh4~kczq%h6{[xF:s#]_"><field name="PIN">27</field></shadow></value><next><block type="asr_ws2812_pixel_set_all_color" id="~-a.Jj}iCT#EY=BN7VTX"><field name="color">#0000ff</field><value name="light"><shadow type="math_number" id="*FP2b3p.PE`%5mFUD9e7"><field name="NUM">100</field></shadow></value><value name="port"><shadow type="pins_digital" id="wg;O[=EMC5wM,a^o9_|?"><field name="PIN">27</field></shadow></value><next><block type="asr_ws2812_pixel_show" id="(/:=pq@$:9)lg#q559|2"><value name="port"><shadow type="pins_digital" id="Wd[ffb`GbbZH0uoRjdh]"><field name="PIN">27</field></shadow></value><next><block type="asr_tm1650_begin" id="`b%s}+$~lRW|3{QV+;fz"><value name="SDA"><shadow type="pins_digital" id="R$AmPD=wV!eiDF-S5602"><field name="PIN">11</field></shadow></value><value name="SCL"><shadow type="pins_digital" id="=]6h:c7C?Vdz2B!gcr54"><field name="PIN">12</field></shadow></value><next><block type="haodabit_DELAY1" id="p|1N$w.uic8A[@nbVgu3"><value name="ioinput"><shadow type="math_number" id=":6Gqln25~0%e;3}/%hQR"><field name="NUM">5000</field></shadow></value><next><block type="espwifi_begin" id="*pia%Ec+%pTFPXoxYX?l"><field name="port">Serial2</field><next><block type="controls_if" id="f=8xPo|F*Yi$qF*,-Uh,"><mutation else="1"></mutation><value name="IF0"><block type="espwifi_check" id="a}~~CqbbL2R[J?2%YTLg"><field name="port">Serial2</field></block></value><statement name="DO0"><block type="serial_println" id="!?`~tno^e944%hhXQp5C"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="X_1~XJ*TmyWN%2Iz+{$t"><field name="TEXT">check ok</field></block></value></block></statement><statement name="ELSE"><block type="serial_println" id="dVei.1_q9}Y!TQi:W!?U"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="%#wj/k-uZ%=#od*rs(p3"><field name="TEXT">check err</field></block></value></block></statement><next><block type="controls_if" id="Qq}Ek{5D,MI+{2*YG=N:"><mutation else="1"></mutation><value name="IF0"><block type="espwifi_setmode" id="%R%njp353eDqf5Z5$xWN"><field name="port">Serial2</field><field name="mode">WIFI_MODE_STATION</field></block></value><statement name="DO0"><block type="serial_println" id="Ws;6M2XU=YTmxmCuL8Q^"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="[@rm1/b$??Ez{yZ4x:b2"><field name="TEXT">setMode ok</field></block></value></block></statement><statement name="ELSE"><block type="serial_println" id="qb)9iLmy`Gz):xG7=9_("><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="[6q$yn[$Ks1|FeNMt*go"><field name="TEXT">setMode err</field></block></value></block></statement><next><block type="controls_if" id="n;xKa3{@%/MO8eW?K1Cj"><mutation else="1"></mutation><value name="IF0"><block type="espwifi_connectap" id="Oy*S^*2=Cr=62Dp)hkoC"><field name="port">Serial2</field><value name="ssid"><shadow type="text" id=";yS,6.P(OLVzko[1fXip"><field name="TEXT">haoda7</field></shadow></value><value name="passwd"><shadow type="text" id="_np,rvo(pY$F-yv)G*wx"><field name="TEXT">0123456789</field></shadow></value></block></value><statement name="DO0"><block type="serial_println" id="o58]!p86q9*YL;M#%;P*"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="#N1z~mF93EUHH|IqA+1+"><field name="TEXT">connectAP ok</field></block></value></block></statement><statement name="ELSE"><block type="serial_println" id="Q`fVpH{1sOLs_/X00!YZ"><field name="serial_select">Serial</field><value name="CONTENT"><block type="text" id="+KkI)kjnkOCG3?a]KRjI"><field name="TEXT">connectAP err</field></block></value></block></statement><next><block type="espwifi_mqttclient" id="GJ9axUieRn#4aXdSw,?h"><field name="port">Serial2</field><value name="id"><shadow type="text" id="Z`BLx*bq*}_^=dKw{^UB"><field name="TEXT">twen</field></shadow></value><value name="user"><shadow type="text" id="f40o{;g2hIzHaO?:]Z,u"><field name="TEXT"></field></shadow></value><value name="pswd"><shadow type="text" id="VE)r7.Xh+6NF@+1+,!q["><field name="TEXT"></field></shadow></value><value name="keepalive"><shadow type="math_number" id="`%kF)R*9:r!6q?WUre8i"><field name="NUM">30</field></shadow></value><next><block type="espwifi_mqttconnect" id="gT%]Wm[8FDqH1$D=045:"><field name="port">Serial2</field><value name="server"><shadow type="text" id=".5ADJ7}xOMeC%PIq3oX^"><field name="TEXT">192.168.2.193</field></shadow></value><value name="port"><shadow type="math_number" id="{*nHjg0Qi!@IWp^8v*H="><field name="NUM">1883</field></shadow></value><next><block type="espwifi_mqttsubscribe" id="}npff*AY]9?$L%);6HvD"><field name="port">Serial2</field><value name="str"><shadow type="text" id="(1+ycR,GF#T0}5KN(Ew*"><field name="TEXT">topic/rgb</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="thread_app" id="X-wEw|TRQ}o~HBR10.4D" x="0" y="1141"><field name="app_name">app</field><field name="uxPriority">4</field><field name="mem">512</field><statement name="DO"><block type="controls_repeat_forever" id="Hh6-O:hOeSrb=H%1qckt"><statement name="DO"><block type="variables_declare" id="4b~!XAH4kZG.vP6U(pid"><field name="VAR">light</field><field name="ioinput">uint16_t</field><value name="VALUE"><block type="math_number" id="(6|b{~V-v+_g5U/Q.gY{"><field name="NUM">0</field></block></value><next><block type="variables_set" id=")apgY^h7uuRFm`vvh#PG"><field name="VAR">count</field><value name="VALUE"><block type="math_arithmetic" id="+oWk5p#6*6(Dm,b|jJB*"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="`IYCePL1ncQByEuNG]!o"><field name="NUM">1</field></shadow><block type="variables_get" id="l838KIY=^(`N#+rpp.cK"><field name="VAR">count</field></block></value><value name="B"><shadow type="math_number" id="OOcTG[z]NXkK4j.Xj}?3"><field name="NUM">1</field></shadow></value></block></value><next><block type="controls_if" id="qWF9+_4=c`(pnn2-]zq`"><value name="IF0"><block type="logic_compare" id="~jze{f[b}AHI(/t0J5wp"><field name="OP">GTE</field><value name="A"><block type="variables_get" id="s}[~1qJZzMN;L=0{DBum"><field name="VAR">count</field></block></value><value name="B"><block type="math_number" id="uL3cga#9[A[)qkkcAq@,"><field name="NUM">2500</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="h}[eG`bnxT_H_t#H;ZJ!"><field name="VAR">count</field><value name="VALUE"><block type="math_number" id="C%Vc83=or-e(COhT~4w)"><field name="NUM">0</field></block></value><next><block type="variables_set" id="]ahq1U@?f4!sXmm)v]^*"><field name="VAR">light</field><value name="VALUE"><block type="adc_read" id="p{;1dY7}h-I26MT_^Wh%"><value name="PIN"><shadow type="pins_adc" id="wlr;?-JYzPK`3ynaP8=@"><field name="PIN">17</field></shadow></value></block></value><next><block type="asr_tm1650_clear" id="!2[j3o{bJ?,@E{TI`029"><value name="SDA"><shadow type="pins_digital" id="vG2DQoyz.1C,QTM`(,Pl"><field name="PIN">11</field></shadow></value><value name="SCL"><shadow type="pins_digital" id="`$u_hJ71utjwmlN*%VpQ"><field name="PIN">12</field></shadow></value><next><block type="asr_tm1650_display_num" id="~43Cst!0Kx/-TtZnu_H."><field name="state">num</field><value name="SDA"><shadow type="pins_digital" id="I.h0ilD3Whp!=SvJPzQU"><field name="PIN">11</field></shadow></value><value name="SCL"><shadow type="pins_digital" id="vVOtb0y$%xoG3kHDDrG+"><field name="PIN">12</field></shadow></value><value name="num"><shadow type="math_number" id="B}eZkJ]Q8R{}_4r=?MIl"><field name="NUM">1234</field></shadow><block type="variables_get" id="@@B^FIdp7jQj0jnGcQsh"><field name="VAR">light</field></block></value><next><block type="espwifi_mqttpublish" id="dEa+XD?g;fqT-@TpuH-/"><field name="port">Serial2</field><value name="str"><shadow type="text" id="E(@!{K,A[l(5QI9]_dfT"><field name="TEXT">125</field></shadow><block type="text_join" id="4yqLL1:YID.;%_8@/dIs"><mutation items="1"></mutation><value name="ADD0"><block type="variables_get" id="Sgvhetd]%GV1XhR/]8L+"><field name="VAR">light</field></block></value></block></value><value name="topic"><shadow type="text" id="6pyfK2MQ-s%o`|TrO7n/"><field name="TEXT">topic/light</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><next><block type="controls_if" id="Nli1=_KcFV)Bu?U{7-*p"><value name="IF0"><block type="logic_compare" id="*MY5IiGtTlIDYzUYVN59"><field name="OP">EQ</field><value name="A"><block type="espwifi_getstate" id="Y+@8ARaGe5s+_^D3n4oh"><field name="stus">MQTT_RECV_TOPIC</field></block></value><value name="B"><block type="espwifi_checkmessage" id="qUvBX@9U)Enyg!+L|8R9"><field name="port">Serial2</field></block></value></block></value><statement name="DO0"><block type="variables_declare" id="KP4|wPeeticTJXuP%}@7"><field name="VAR">str_r</field><field name="ioinput">String</field><value name="VALUE"><block type="espwifi_getmessage" id="{0r{L$|?GuNDw~;nI((J"><field name="port">Serial2</field></block></value><next><block type="serial_print" id="If,YmO$sA1s:{uljO$O_"><field name="serial_select">Serial</field><value name="CONTENT"><block type="variables_get" id="}3lgYh|9K+Yl,vWKaF27"><field name="VAR">str_r</field></block></value><next><block type="controls_if" id="l!6pGL0pJVyXZ+cbQMjB"><value name="IF0"><block type="logic_compare" id="YlxZ:}I+@GE|3O^^iA6^"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="RuL7sfn.%e-R._X]}U*e"><field name="VAR">str_r</field></block></value><value name="B"><block type="text" id="EIE0G1]UB6JhcR/;Q5a5"><field name="TEXT">open</field></block></value></block></value><statement name="DO0"><block type="gpio_digitalw" id="]l434_MGf^}W9EfkAW55"><value name="PIN"><shadow type="pins_digital" id="K+u:k~pT1D$!goS}sAIu"><field name="PIN">28</field></shadow></value><value name="hg"><shadow type="pins_value" id="0-*ny)7OBE3_mxXa+`L*"><field name="PIN">1</field></shadow></value><next><block type="asr_ws2812_pixel_set_all_color" id="_csm/)5,^t7=!19ag.te"><field name="color">#ff0000</field><value name="light"><shadow type="math_number" id="fcuwDvg#D0,H`:ONcny}"><field name="NUM">100</field></shadow></value><value name="port"><shadow type="pins_digital" id="E;1G|BzG},?+jC8x:Ifk"><field name="PIN">27</field></shadow></value><next><block type="asr_ws2812_pixel_show" id="9fx+L.%.=Ls!du3CYREk"><value name="port"><shadow type="pins_digital" id="?-F2o]C?Cm[N@wRS9lM|"><field name="PIN">27</field></shadow></value></block></next></block></next></block></statement><next><block type="controls_if" id="W3KV.[Tto+O;4u}vW|1!"><value name="IF0"><block type="logic_compare" id="8ZUME/oc|O^0t;%kP.#n"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="_)91Jq}v(.o*H0_~tCDC"><field name="VAR">str_r</field></block></value><value name="B"><block type="text" id="H]MUwijE8QKOOdeTZQy)"><field name="TEXT">close</field></block></value></block></value><statement name="DO0"><block type="gpio_digitalw" id="!9BOn2X-dL+9u4,OQ0Kt"><value name="PIN"><shadow type="pins_digital" id="fEm~(*X@sMqAslAMG;~Y"><field name="PIN">28</field></shadow></value><value name="hg"><shadow type="pins_value" id="%Psx=l-O@(pQt;2RyC3%"><field name="PIN">0</field></shadow></value><next><block type="asr_ws2812_pixel_set_all_color2" id="lF7N1CSy5pT_{4(|[X!T"><value name="R"><shadow type="math_number" id="a;Z3Z3i)wk4kLG78`a3R"><field name="NUM">0</field></shadow></value><value name="G"><shadow type="math_number" id="q*Se*Q8!dx^.+A62ic8I"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="`rz*$3!C?mbi3Xr=7IUh"><field name="NUM">0</field></shadow></value><value name="port"><shadow type="pins_digital" id=")_W:n,+yGUZ-TMI[^|,o"><field name="PIN">27</field></shadow></value><next><block type="asr_ws2812_pixel_show" id="La-)*@%*|wb-hhi!N;V4"><value name="port"><shadow type="pins_digital" id="966u%22Xp=EXpZWLI2e`"><field name="PIN">27</field></shadow></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></statement><next><block type="haodabit_DELAY1" id="z^(*zM{hw^yY=:u+9ZmU"><value name="ioinput"><shadow type="math_number" id="-mghnTfP3skW5k,K~-G|"><field name="NUM">2</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block></statement></block></xml>
<!-- edittype="asr_pro" -->
<!-- officialLib="[{"id":137,"version":"0.0.6"},{"id":280,"version":"0.0.2"},{"id":309,"version":"0.0.3"},{"id":409,"version":"0.0.1"}]" -->
<!-- personalLib="[]" -->